<%= juggernaut :channels => ["build_#{@build.name}_#{@build.position}"] %>

<h1>Build output <%= link_to @plan.name, plan_path(@plan) %> #<%= @build.position %> <%= 'on slave %s' % @build.slave.name if @build.slave %></h1>

<dl>
  <dt>Revision</dt>
  <dd><%= @build.revision.blank? ? 'unknown' : @build.revision %></dd>
  
  <dt>Duration</dt>
  <dd><%= duration(@build.duration) %></dd>
</dl>

<% if @build.running? || @build.pending? %>
  <p><%= link_to image_tag("icons/small/stopped.png") + ' Stop', stop_plan_build_path(@plan, @build), :method => :post %></p>
<% end %>

<ul class="action-list">
  <li><%= link_to 'Raw output', plan_build_path(@plan, @build, :report => 'raw') %></li>
  <li><%= link_to 'Gist', plan_build_path(@plan, @build, :report => 'gist') %></li>
  <li><%= link_to 'Details', plan_build_path(@plan, @build, :report => 'details') %></li>
</ul>

<%= auto_update 'report' unless @build.finished? %>
<div class="report" id="report">
  <%= render :partial => 'report' %>
</div>
<div id="bottom_anchor"></div>

<p><%= link_to 'Back to Builds', plan_builds_path(@plan) %></p>
