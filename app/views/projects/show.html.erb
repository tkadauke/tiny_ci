<h1>Project <%= @project.name %></h1>

<ul class="action-list">
  <li><%= link_to 'Edit', edit_project_path(@project) %></li>
  <li><%= link_to 'Builds', project_builds_path(@project) %></li>
  <li><%= link_to 'Clone', new_project_path(:clone => @project) %></li>
  <% unless @project.parent %>
    <li><%= link_to 'New Child Project', new_project_path(:parent => @project) %></li>
  <% end %>
</ul>

<% if @project.previous || @project.next %>
  <h2>Build chain</h2>
  
  <table>
    <tr>
      <% if @project.previous %>
        <td><%= link_to @project.previous.name, project_path(@project.previous) %></td>
      <% end %>
      <td><%= @project.name %></td>
      <% if @project.next %>
        <td><%= link_to @project.next.name, project_path(@project.next) %></td>
      <% end %>
    </tr>
  </table>
<% end %>

<% if @project.has_children? %>
  <h2>Children</h2>
  
  <%= render :partial => "list", :locals => { :projects => @project.children } %>
<% end %>

<h2>Project details</h2>

<dl>
  <dt>Description</dt>
  <dd><%= simple_format @project.description %></dd>

  <dt>Steps</dt>
  <dd><pre><%= @project.steps %></pre></dd>

  <dt>Requirements</dt>
  <dd><%= @project.requirements %></dd>
</dl>

<% if @project.standalone? %>
  <%= button_to 'Build now', project_builds_path(@project) %>
<% else %>
  <p><%= link_to 'Back to parent project %s' % @project.parent.name, project_path(@project.parent) %></p>
<% end %>
